#!/bin/sh

# Prevent multiple instances
pidof -o %PPID -x player_loop >/dev/null 2>&1 && exit 0

# Signal dwmblocks on any player state or metadata change
playerctl --follow --all-players metadata --format "{{playerName}} {{status}}" 2>/dev/null | \
    while read -r _; do
        kill -45 $(pidof dwmblocks) 2>/dev/null
    done

